<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> My Team's Project </title>
        <link rel="icon" type="image/x-icon" href="/web_icon.ico">
        <link rel="stylesheet" href="./style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <form>
            <div class="login-box">
                <img src="CSS1.png" class="image">
                <h1>LOGIN FORM</h1>
                <div class="textbox">
                    <i class="fas fa-user"></i>
                    <input id="username" type="text" placeholder="Username" name="" value="">
                </div>
                <div class="textbox">
                    <i class="fas fa-key"></i>
                    <i class="fas fa-eye" onclick="show()"></i>
                    <input id="password" type="password" placeholder="Password" name="" value="">
                </div>
    
                <input class="btn" type="submit" name="" value="Login">
            </div>
            <script>
                function show() {
                    var pswrd = document.getElementById('password');
                    var icon = document.querySelector('.fa-eye');
                    if (pswrd.type === "password") {
                        pswrd.type = "text";
                        icon.style.color = "#000000";
                    }else {
                        pswrd.type = "password";
                        icon.style.color = "#FFFFFF";
                    }
                }
            </script>
        </form>
    </body>
</html>
<script>
    $( "form" ).submit(function( event ) {
        event.preventDefault();
        
        var username = $("input#username").val();
        var password = $("input#password").val();

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/", true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({
            username: username, password: password
        }));
        xhr.onreadystatechange = function () {
            if (this.readyState != 4) return;

            if (this.status == 200) {
                var data = JSON.parse(this.responseText);
                if (data.login == "passed") {
                    window.location.href = "info.html";
                } else {
                    window.location.href = "404notfound.html";
                }
            }
        };
    });
</script>